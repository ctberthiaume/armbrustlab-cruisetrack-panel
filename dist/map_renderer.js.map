{"version":3,"sources":["../src/map_renderer.js"],"names":["link","scope","elem","attrs","ctrl","mapContainer","find","events","on","render","renderingCompleted","map","$","empty","WorldMap","resize","drawTrack","zoomToTrack"],"mappings":";;;;;;AAIe,WAASA,IAAT,CAAcC,KAAd,EAAqBC,IAArB,EAA2BC,KAA3B,EAAkCC,IAAlC,EAAwC;AACrD,QAAMC,eAAeH,KAAKI,IAAL,CAAU,eAAV,CAArB;;AAEAF,SAAKG,MAAL,CAAYC,EAAZ,CAAe,QAAf,EAAyB,YAAM;AAC7B;AACAC;AACAL,WAAKM,kBAAL;AACD,KAJD;;AAMA,aAASD,MAAT,GAAkB;AAChB;AACA;;AAEA,UAAI,CAACL,KAAKO,GAAV,EAAe;AACb;AACAC,UAAEP,aAAa,CAAb,CAAF,EAAmBQ,KAAnB;AACA;AACAT,aAAKO,GAAL,GAAW,IAAIG,QAAJ,CAAaV,IAAb,EAAmBC,aAAa,CAAb,CAAnB,CAAX;AACD;;AAEDD,WAAKO,GAAL,CAASI,MAAT;;AAEA;;AAEAX,WAAKO,GAAL,CAASK,SAAT;AACAZ,WAAKO,GAAL,CAASM,WAAT;AACD;AACF;;qBA3BuBjB,I;;;;AAFjBc,c","file":"map_renderer.js","sourcesContent":["import './external/leaflet/leaflet.css!';\nimport './external/leaflet/L.Control.MousePosition.css!';\nimport WorldMap from './worldmap';\n\nexport default function link(scope, elem, attrs, ctrl) {\n  const mapContainer = elem.find('.mapcontainer');\n\n  ctrl.events.on('render', () => {\n    //console.log('map render');\n    render();\n    ctrl.renderingCompleted();\n  });\n\n  function render() {\n    //console.log('map render');\n    //if (!ctrl.mapdata || ctrl.mapdata.length === 0) return;\n\n    if (!ctrl.map) {\n      // Clear any old leaflet map in map container div\n      $(mapContainer[0]).empty();\n      // New map!\n      ctrl.map = new WorldMap(ctrl, mapContainer[0]);\n    }\n\n    ctrl.map.resize();\n\n    //if (ctrl.mapCenterMoved) ctrl.map.panToMapCenter();\n\n    ctrl.map.drawTrack();\n    ctrl.map.zoomToTrack();\n  }\n}\n"]}